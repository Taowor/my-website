<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tuawor Smart Farm</title>

    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="header">
      <div class="text">Tuawor Smart Farm</div>
      <div class="text-Time" id="lastUpdate"></div>
    </div>

    <div class="container">
      <div id="homePage">
        <div class="text-Title">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö</div>
        <div class="card-mainEnvi">
          <div class="column">
            <div>
              <div class="text-label">‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</div>
              <div class="text-value" id="temp">--</div>
            </div>
            <div>
              <div class="text-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô</div>
              <div class="text-value" id="humidity">--</div>
            </div>
            <div>
              <div class="text-label">‡πÅ‡∏™‡∏á‡πÅ‡∏î‡∏î</div>
              <div class="text-value" id="light">--</div>
            </div>
          </div>
          <div class="column" id="pumpOverview">
            </div>
        </div>

        <div class="text-Title">‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</div>
        <div>
          <div id="pumpControls">
            </div>
        </div>
        
        <div class="text-Title">üåø ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏õ‡∏•‡∏á‡∏õ‡∏•‡∏π‡∏Å (‡∏™‡∏£‡∏∏‡∏õ)</div>
        <div class="global-setting" id="plantingSummaryContainer">
          <div class="text-Detail" id="plantSummaryLoading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏õ‡∏•‡∏á‡∏õ‡∏•‡∏π‡∏Å...</div>
        </div>
        
        <div class="text-Title">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</div>
        <div class="global-setting">
          <div class="text-Detail">
            ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∑‡πà‡∏ô‡πÜ
          </div>
        </div>
        
      </div>

      <div id="settingPage" style="display: none"></div>
      <div id="detailPage" style="display: none"></div>
    </div>

    <footer>
      <div>
        <a href="#" onclick="loadPage('home')">üè†<br />‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
      </div>
      <div>
        <a href="#" onclick="loadPage('detail')">üåø<br />‡πÅ‡∏õ‡∏•‡∏á‡∏õ‡∏•‡∏π‡∏Å</a>
      </div>
      <div>
        <a href="#" onclick="loadPage('setting')">‚öôÔ∏è<br />‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</a>
      </div>
    </footer>

    <script>
      function loadPage(page) {
        const home = document.getElementById("homePage");
        const setting = document.getElementById("settingPage");
        const detail = document.getElementById("detailPage");

        home.style.display = "none";
        setting.style.display = "none";
        detail.style.display = "none";

        if (page === "home") {
          home.style.display = "block";
          if (typeof renderHomeUI === "function") {
             renderHomeUI(); 
          }
        } else if (page === "setting") {
          setting.style.display = "block";
          if (!setting.innerHTML.trim()) {
            fetch("setting.html")
              .then((res) => res.text())
              .then((html) => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, "text/html");
                setting.innerHTML = doc.body.innerHTML;

                if (typeof loadSettings === "function") {
                  loadSettings();
                } else {
                  console.warn("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô loadSettings()");
                }
              })
              .catch((err) => {
                console.error("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î setting.html", err);
              });
          } else {
             if (typeof loadSettings === "function") {
                 loadSettings();
             }
          }
        } else if (page === "detail") {
          detail.style.display = "block";
          if (!detail.innerHTML.trim()) {
            fetch("planting_detail.html")
              .then((res) => res.text())
              .then((html) => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, "text/html");
                detail.innerHTML = doc.body.innerHTML;

                if (typeof loadPlantingDetails === "function") {
                  loadPlantingDetails();
                } else {
                  console.warn("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô loadPlantingDetails()");
                }
              })
              .catch((err) => {
                console.error("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î planting_detail.html", err);
              });
          } else {
            if (typeof loadPlantingDetails === "function") {
              loadPlantingDetails();
            }
          }
        }
      }
    </script>
  </body>
</html>